--Practice Set 2: https://drive.google.com/file/d/1tG8Symf9yzss2py7Pk4wrkCKBVSyKSMT/view



--1
CREATE DATABASE EmpMgmtDB;
USE EmpMgmtDB;

--2
CREATE TABLE Departments (
  dept_id INT AUTO_INCREMENT PRIMARY KEY,
  dept_name VARCHAR(100) NOT NULL UNIQUE,
  location VARCHAR(100)
);

--3
CREATE TABLE Employees (
  emp_id INT AUTO_INCREMENT PRIMARY KEY,
  emp_name VARCHAR(100) NOT NULL,
  email VARCHAR(150) UNIQUE,
  salary DECIMAL(10,2) NOT NULL CHECK (salary >= 0),
  join_date DATE NOT NULL,
  dept_id INT,
  CONSTRAINT fk_emp_dept
    FOREIGN KEY (dept_id) REFERENCES Departments(dept_id)
    ON UPDATE CASCADE
    ON DELETE SET NULL
);

--4
ALTER TABLE Employees
ADD COLUMN status VARCHAR(20) NOT NULL DEFAULT 'Active';

--5
ALTER TABLE Employees
MODIFY COLUMN emp_name VARCHAR(200) NOT NULL;

--6
ALTER TABLE Employees
DROP COLUMN email;

--7
ALTER TABLE Employees
DROP FOREIGN KEY fk_emp_dept;

DROP TABLE Departments;

--8
CREATE INDEX idx_emp_name ON Employees (emp_name);

--9
CREATE INDEX idx_emp_dept ON Employees (dept_id);

--10
SELECT emp_id, emp_name, salary, join_date, dept_id
FROM Employees
WHERE dept_id = 3;




--11
CREATE DATABASE OrderDB;
USE OrderDB;

--12
CREATE TABLE Customers (
  customer_id INT AUTO_INCREMENT PRIMARY KEY,
  customer_name VARCHAR(150) NOT NULL,
  email VARCHAR(150) UNIQUE,
  phone VARCHAR(20),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

--13
CREATE TABLE Orders (
  order_id INT AUTO_INCREMENT PRIMARY KEY,
  customer_id INT NULL,
  order_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  amount DECIMAL(10,2) NOT NULL CHECK (amount >= 0),

  CONSTRAINT fk_orders_customer
    FOREIGN KEY (customer_id) REFERENCES Customers(customer_id)
    ON UPDATE CASCADE
    ON DELETE SET NULL
);

--14
ALTER TABLE Orders
ADD COLUMN order_status VARCHAR(20) NOT NULL DEFAULT 'Pending';

--15
DROP TABLE Orders;

CREATE TABLE Orders (
  order_id BIGINT AUTO_INCREMENT PRIMARY KEY,
  customer_id INT NULL,
  order_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  amount DECIMAL(12,2) NOT NULL CHECK (amount >= 0),
  order_status ENUM('Pending','Paid','Shipped','Delivered','Cancelled')
    NOT NULL DEFAULT 'Pending',

  CONSTRAINT fk_orders_customer
    FOREIGN KEY (customer_id) REFERENCES Customers(customer_id)
    ON UPDATE CASCADE
    ON DELETE SET NULL
);

--16
CREATE INDEX idx_orders_customer_id ON Orders(customer_id);

--17
CREATE INDEX idx_orders_amount ON Orders(amount);
